# 影梭 (Shadow Shuttle) - 功能简介

> 基于私有 Mesh 网络的智能远程服务器管理工具

---

## 核心功能

### 🤖 AI 智能助手

**用自然语言控制服务器，无需记忆复杂命令**

- 用日常语言描述需求，AI 自动生成 Shell 命令
- 支持中文和英文输入
- 理解上下文，支持连续对话
- 自动识别危险命令并警告

**示例**:
```
你: "查看当前目录有哪些文件"
AI: ls -la

你: "找出最大的 10 个文件"
AI: du -ah . | sort -rh | head -n 10

你: "删除所有日志文件"
AI: rm *.log  ⚠️ 危险操作，需要确认
```

---

### 🔒 安全私有网络

**基于 WireGuard 的端到端加密 Mesh 网络**

- 军事级加密通信 (ChaCha20-Poly1305)
- 无需公网 IP，自动 NAT 穿透
- 零信任架构，默认拒绝所有连接
- 3-4 秒快速连接
- 私有 IP 段，与公网完全隔离

**特点**:
- ✅ 在任何网络环境下都能连接（咖啡厅、机场、移动网络）
- ✅ 穿透防火墙和 NAT，无需端口转发
- ✅ 点对点加密，中间节点无法窃听

---

### 📱 智能设备管理

**轻松管理所有远程设备**

- 自动发现 Mesh 网络中的设备
- 实时显示设备在线状态
- 扫描二维码快速配对（5 秒完成）
- 支持 Windows、macOS、Linux
- 查看设备详细信息

**操作**:
- 点击设备选择连接方式（AI 对话 / SSH 终端）
- 长按查看设备详情或删除
- 下拉刷新设备状态

---

### 🎤 语音输入控制

**解放双手，用语音快速下达命令**

- 按住录音按钮说话
- 自动转换为文字（0.5-0.8 秒）
- 支持中文和英文
- 自动过滤背景噪音

**使用场景**:
- 在移动中快速下达命令
- 长命令输入更便捷
- 紧急情况快速响应

---

### 🛡️ 隐私保护

**创新的本地脱敏机制，敏感信息不泄露**

在发送到 AI 前，自动识别并脱敏：
- 文件路径: `/home/user/secret.txt` → `<FILE_1>`
- IP 地址: `192.168.1.100` → `<IP_1>`
- 密码: `password=abc123` → `<SECRET_1>`
- 邮箱: `user@example.com` → `<EMAIL_1>`

**工作流程**:
```
用户输入 → 本地脱敏 → 发送给 AI → AI 返回 → 本地还原 → 执行
```

**安全保障**:
- ✅ 敏感信息永不离开设备
- ✅ API 密钥加密存储 (AES-256)
- ✅ 用户完全控制数据

---

### ⚠️ 安全防护

**多层防护，防止误操作和数据丢失**

自动检测危险命令：
- 🔴 **严重**: `rm -rf /`、`dd if=/dev/zero`、`mkfs`
- 🟠 **高**: `fdisk`、`rm -rf /var`
- 🟡 **中**: `chmod 777 -R`、`sudo` 命令

**防护机制**:
- 命令执行前预览和解释
- 危险命令需要二次确认
- 严重危险需要输入设备名称确认
- 完整的审计日志记录

---

### ⌨️ SSH 终端

**为高级用户提供完整的终端体验**

- 支持标准 SSH 协议
- 实时命令执行和输出
- 支持 ANSI 颜色和格式
- 文本选择和复制
- 命令历史记录

**性能**:
- 命令执行延迟 < 100ms
- 流畅的滚动和渲染 (60 FPS)
- 支持大量输出

---

### 💡 智能命令建议

**基于历史和上下文的实时推荐**

- 根据输入自动显示相关命令
- 基于使用频率排序
- 考虑当前上下文（设备、目录）
- 响应速度快 (< 200ms)

**建议来源**:
- 命令历史记录
- 收藏的常用命令
- 上下文相关命令
- 系统推荐

---

### 📜 命令历史

**完整记录所有操作，方便回溯和复用**

记录内容：
- 用户的自然语言输入
- AI 解析的命令
- 命令执行输出
- 退出状态码
- 执行时间
- 危险标记

**功能**:
- 按设备/时间/危险级别筛选
- 关键词搜索
- 查看完整输出
- 重新执行历史命令
- 添加到收藏

**数据管理**:
- 自动限制最多 1000 条
- 查询速度 < 100ms

---

### ⭐ 命令收藏夹 (开发中)

**保存常用命令，提高工作效率**

- 收藏经常使用的命令
- 添加名称、描述和标签
- 快速执行收藏命令
- 显示使用次数统计

**使用场景**:
- 复杂的系统维护命令
- 常用的部署脚本
- 定期执行的任务

---

### 📊 审计日志 (开发中)

**完整的操作审计，满足合规要求**

- 记录所有命令执行详情
- 风险级别标记
- 用户确认状态
- 导出日志 (JSON/CSV)
- 自动清理 30 天前日志

**用途**:
- 安全审计
- 操作追溯
- 事后分析
- 异常检测

---

### 🔄 错误处理

**智能的错误处理和自动恢复**

| 错误类型 | 处理方式 |
|---------|---------|
| 网络错误 | 自动重试 3 次 |
| SSH 认证失败 | 提示重新配对 |
| AI 服务错误 | 切换到离线模式 |
| VPN 断开 | 自动重连 |
| 命令执行错误 | 显示错误和解决方案 |

**用户体验**:
- 清晰的错误提示
- 可操作的解决方案
- 自动恢复机制

---

### 📴 离线模式

**网络断开时保持核心功能可用**

离线可用：
- ✅ 查看命令历史
- ✅ 查看收藏命令
- ✅ 查看设备列表（缓存）
- ✅ 查看审计日志

离线不可用：
- ❌ AI 命令解析
- ❌ 命令执行
- ❌ 设备状态更新

---

### 🔌 多 AI 提供商

**灵活选择 AI 服务，避免单点依赖**

支持的提供商：
- ✅ **OpenAI GPT-4** - 强大的理解能力
- ✅ **Claude 3.5 Sonnet** - 更安全的输出
- 🚧 **Google Gemini** - 计划中

**特性**:
- 安全的密钥存储和管理
- 密钥有效性验证
- 快速切换提供商
- 主提供商不可用时自动切换

---

## 性能指标

| 指标 | 表现 |
|------|------|
| VPN 连接 | 3-4 秒 |
| AI 响应 | 1-2 秒 |
| 命令执行 | 50-80ms |
| 语音识别 | 0.5-0.8 秒 |
| 命令建议 | 100-200ms |
| 历史查询 | 50-100ms |
| UI 帧率 | 60 FPS |

---

## 平台支持

**移动端**:
- iOS 15.0+
- Android 10.0+

**服务端**:
- Windows 10/11, Server 2019+
- macOS 11.0+
- Linux (Ubuntu, Debian, CentOS, Arch)
- 树莓派 (ARM64)

---

## 功能状态

| 功能 | 状态 |
|------|------|
| VPN 连接 | ✅ 已完成 |
| 设备管理 | ✅ 已完成 |
| AI 智能助手 | ✅ 已完成 |
| SSH 终端 | ✅ 已完成 |
| 语音输入 | ✅ 已完成 |
| 隐私保护 | ✅ 已完成 |
| 安全防护 | ✅ 已完成 |
| 命令历史 | ✅ 已完成 |
| 智能建议 | ✅ 已完成 |
| 错误处理 | ✅ 已完成 |
| 离线模式 | ✅ 已完成 |
| 命令收藏 | 🚧 开发中 |
| 审计日志 | 🚧 开发中 |
| 设置界面 | 🚧 开发中 |
| 文件传输 | 📋 计划中 |
| 多用户管理 | 📋 计划中 |

---

**影梭 - 让远程服务器管理更安全、更智能、更简单**
